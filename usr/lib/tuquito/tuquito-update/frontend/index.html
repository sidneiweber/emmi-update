<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" DIR="LTR">
<head>
	<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
	<script type="text/javascript" src="/usr/lib/tuquito/tuquito-update/frontend/js/jquery.js"></script>
	<script type="text/javascript" src="/usr/lib/tuquito/tuquito-update/frontend/js/jquery.easing.1.3.js"></script>
	<link rel="stylesheet" type="text/css" href="/usr/lib/tuquito/tuquito-update/frontend/styles.css" media="screen" />
	<script type="text/javascript">
	$(document).ready(function(){
		totalSize = parseInt($size);
		finalSize = totalSize

		$('#list li').click(function (){
			size = parseInt($(this).attr('size'));
			if($(this).hasClass('uncheck')){
				$(this).removeClass('uncheck');
				$(this).addClass('check');
				finalSize = finalSize + size;
			}else{
				$(this).removeClass('check');
				$(this).addClass('uncheck');
				finalSize = finalSize - size;
			}
			strSize = convert(finalSize);
			$('#size').text(strSize);
		});

		$('#list li a').click(function (){
			data = $(this).next().html();
			$('#info').hide().html(data).fadeIn();
		});

		$('#list li a').mouseover(function() {
			$(this).parent().unbind('click');
		});

		$('#list li a').mouseout(function() {
			$(this).parent().click(function (){
				size = parseInt($(this).attr('size'));
				if($(this).hasClass('uncheck')){
					$(this).removeClass('uncheck');
					$(this).addClass('check');
					finalSize = finalSize + size;
				}else{
					$(this).removeClass('check');
					$(this).addClass('uncheck');
					finalSize = finalSize - size;
				}
				strSize = convert(finalSize);
				$('#size').text(strSize);
			});
		});

		$('#install').click(function (){
			$('#list li.check').each(function(index) {
				if ($(this).attr('name') == '')
					alert('Debes seleccionar al menos un elemento');
				else
					changeTitle('call:getPackages:' + $(this).attr('name'));
			});
			changeTitle('call:install');
		});

		$('#refresh').click(function (){
			changeTitle('call:refresh');
		});

		$('#select').toggle(
			function (){
				$(this).text('$selectAll');
				$('.check').removeClass('check').addClass('uncheck');
				$('#size').text('0$kb');
				finalSize = 0;
			},function (){
				$(this).text('$clear');
				$('.uncheck').removeClass('uncheck').addClass('check');
				strSize = convert(totalSize);
				$('#size').text(strSize);
				finalSize = totalSize;
			}		
		);
	});

	function convert(size) {
			if (size == 0)
				strSize = '0$kb';
			if (size >= 1000)
				strSize = parseInt(size / 1000) + '$kb';
			if (size >= 1000000)
				strSize = parseInt(size / 1000000) + '$mb';
			if (size >= 1000000000)
				strSize = parseInt(size / 1000000000) + '$gb';
			return strSize;
	}

	function changeTitle(title) {
		document.title = title;
		//document.title = 'nop';
	}
	</script>
</head>
<body>
<div id="pref" class="hidden">preferencias</div>

<div id="content">

<div id="header">$header</div>

<div id="list">
	<ul class="checkboxLista">
	  $list
	</ul>
</div>

<div id="info"></div>

<div>
	<ul id="buttons">
		<li><div id="select" class="button">$clear</div></li>
		<li><div id="refresh" class="button">$refresh</div></li>
		<li><div id="install" class="button">$install</div></li>
	</ul>
</div>

</div>
</body>
</html>
